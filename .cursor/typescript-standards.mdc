# ğŸ“˜ à¸¡à¸²à¸•à¸£à¸à¸²à¸™ TypeScript

## ğŸ¯ Type Definitions

### Interface à¹à¸¥à¸° Type
```typescript
// âœ… à¸”à¸µ - à¹ƒà¸Šà¹‰ interface à¸ªà¸³à¸«à¸£à¸±à¸š object shapes
interface User {
  id: string;
  name: string;
  email: string;
  createdAt: Date;
}

// âœ… à¸”à¸µ - à¹ƒà¸Šà¹‰ type à¸ªà¸³à¸«à¸£à¸±à¸š unions à¹à¸¥à¸° complex types
type Status = 'pending' | 'approved' | 'rejected';
type ApiResponse<T> = {
  data: T;
  status: number;
  message: string;
};
```

### Generic Types
```typescript
// âœ… à¸”à¸µ - à¹ƒà¸Šà¹‰ Generic types
interface Repository<T> {
  findById(id: string): Promise<T | null>;
  save(entity: T): Promise<T>;
  delete(id: string): Promise<void>;
}

// âœ… à¸”à¸µ - à¹ƒà¸Šà¹‰ Generic constraints
function processData<T extends { id: string }>(items: T[]): T[] {
  return items.filter(item => item.id);
}
```

## ğŸ”§ Function à¹à¸¥à¸° Method Standards

### Function Signatures
```typescript
// âœ… à¸”à¸µ - à¸£à¸°à¸šà¸¸ return type à¸Šà¸±à¸”à¹€à¸ˆà¸™
function calculateTotal(items: CartItem[]): number {
  return items.reduce((sum, item) => sum + item.price, 0);
}

// âœ… à¸”à¸µ - à¹ƒà¸Šà¹‰ async/await
async function fetchUserData(userId: string): Promise<User> {
  const response = await api.get(`/users/${userId}`);
  return response.data;
}
```

### Error Handling
```typescript
// âœ… à¸”à¸µ - à¹ƒà¸Šà¹‰ custom error types
class ValidationError extends Error {
  constructor(message: string, public field: string) {
    super(message);
    this.name = 'ValidationError';
  }
}

// âœ… à¸”à¸µ - à¹ƒà¸Šà¹‰ Result pattern
type Result<T, E = Error> = 
  | { success: true; data: T }
  | { success: false; error: E };

async function safeApiCall<T>(fn: () => Promise<T>): Promise<Result<T>> {
  try {
    const data = await fn();
    return { success: true, data };
  } catch (error) {
    return { success: false, error: error as Error };
  }
}
```

## ğŸ—ï¸ Class à¹à¸¥à¸° OOP

### Class Structure
```typescript
// âœ… à¸”à¸µ - à¹ƒà¸Šà¹‰ access modifiers
class UserService {
  private readonly apiClient: ApiClient;
  
  constructor(apiClient: ApiClient) {
    this.apiClient = apiClient;
  }
  
  public async getUser(id: string): Promise<User> {
    return this.apiClient.get(`/users/${id}`);
  }
  
  private validateUser(user: User): boolean {
    return user.email.includes('@');
  }
}
```

### Dependency Injection
```typescript
// âœ… à¸”à¸µ - à¹ƒà¸Šà¹‰ interface à¸ªà¸³à¸«à¸£à¸±à¸š dependency injection
interface IUserRepository {
  findById(id: string): Promise<User | null>;
  save(user: User): Promise<User>;
}

class UserService {
  constructor(private userRepo: IUserRepository) {}
  
  async createUser(userData: CreateUserDto): Promise<User> {
    const user = new User(userData);
    return this.userRepo.save(user);
  }
}
```

## ğŸ“¦ Module à¹à¸¥à¸° Import/Export

### Export Standards
```typescript
// âœ… à¸”à¸µ - à¹ƒà¸Šà¹‰ named exports
export interface User {
  id: string;
  name: string;
}

export class UserService {
  // implementation
}

// âœ… à¸”à¸µ - à¹ƒà¸Šà¹‰ default export à¸ªà¸³à¸«à¸£à¸±à¸š main class
export default UserService;

// âœ… à¸”à¸µ - à¹ƒà¸Šà¹‰ barrel exports
export * from './user.interface';
export * from './user.service';
export * from './user.repository';
```

### Import Standards
```typescript
// âœ… à¸”à¸µ - à¸ˆà¸±à¸”à¸à¸¥à¸¸à¹ˆà¸¡ imports
// External libraries
import React, { useState, useEffect } from 'react';
import { useQuery } from '@tanstack/react-query';

// Internal modules
import { UserService } from '@/services/user.service';
import { User } from '@/types/user.interface';

// Relative imports
import { Button } from '../components/Button';
```

## ğŸ§ª Testing Standards

### Unit Tests
```typescript
// âœ… à¸”à¸µ - à¹ƒà¸Šà¹‰ describe blocks à¸—à¸µà¹ˆà¸Šà¸±à¸”à¹€à¸ˆà¸™
describe('UserService', () => {
  let userService: UserService;
  let mockRepo: jest.Mocked<IUserRepository>;
  
  beforeEach(() => {
    mockRepo = {
      findById: jest.fn(),
      save: jest.fn(),
    };
    userService = new UserService(mockRepo);
  });
  
  describe('getUser', () => {
    it('should return user when found', async () => {
      const mockUser: User = { id: '1', name: 'Test User' };
      mockRepo.findById.mockResolvedValue(mockUser);
      
      const result = await userService.getUser('1');
      
      expect(result).toEqual(mockUser);
      expect(mockRepo.findById).toHaveBeenCalledWith('1');
    });
    
    it('should throw error when user not found', async () => {
      mockRepo.findById.mockResolvedValue(null);
      
      await expect(userService.getUser('999')).rejects.toThrow('User not found');
    });
  });
});
```

## ğŸš¨ Anti-patterns à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸«à¸¥à¸µà¸à¹€à¸¥à¸µà¹ˆà¸¢à¸‡

### âŒ à¹„à¸¡à¹ˆà¸”à¸µ - à¹ƒà¸Šà¹‰ any type
```typescript
// âŒ à¹„à¸¡à¹ˆà¸”à¸µ
function processData(data: any): any {
  return data.map(item => item.value);
}

// âœ… à¸”à¸µ
function processData<T extends { value: string }>(data: T[]): string[] {
  return data.map(item => item.value);
}
```

### âŒ à¹„à¸¡à¹ˆà¸”à¸µ - à¹„à¸¡à¹ˆà¸£à¸°à¸šà¸¸ return type
```typescript
// âŒ à¹„à¸¡à¹ˆà¸”à¸µ
function calculateTotal(items) {
  return items.reduce((sum, item) => sum + item.price, 0);
}

// âœ… à¸”à¸µ
function calculateTotal(items: CartItem[]): number {
  return items.reduce((sum, item) => sum + item.price, 0);
}
```

### âŒ à¹„à¸¡à¹ˆà¸”à¸µ - à¹ƒà¸Šà¹‰ type assertion à¹‚à¸”à¸¢à¹„à¸¡à¹ˆà¸ˆà¸³à¹€à¸›à¹‡à¸™
```typescript
// âŒ à¹„à¸¡à¹ˆà¸”à¸µ
const user = response.data as User;

// âœ… à¸”à¸µ
const user: User = response.data;
```

## ğŸ“‹ Checklist à¸ªà¸³à¸«à¸£à¸±à¸š TypeScript

- [ ] à¹ƒà¸Šà¹‰ strict mode à¹ƒà¸™ tsconfig.json
- [ ] à¸«à¸¥à¸µà¸à¹€à¸¥à¸µà¹ˆà¸¢à¸‡à¸à¸²à¸£à¹ƒà¸Šà¹‰ `any` type
- [ ] à¸£à¸°à¸šà¸¸ return types à¸ªà¸³à¸«à¸£à¸±à¸š functions
- [ ] à¹ƒà¸Šà¹‰ interface à¸ªà¸³à¸«à¸£à¸±à¸š object shapes
- [ ] à¹ƒà¸Šà¹‰ type guards à¹€à¸¡à¸·à¹ˆà¸­à¸ˆà¸³à¹€à¸›à¹‡à¸™
- [ ] à¹ƒà¸Šà¹‰ Generic types à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸«à¸¡à¸²à¸°à¸ªà¸¡
- [ ] à¸¡à¸µ unit tests à¸—à¸µà¹ˆà¸„à¸£à¸­à¸šà¸„à¸¥à¸¸à¸¡
- [ ] à¹ƒà¸Šà¹‰ ESLint rules à¸ªà¸³à¸«à¸£à¸±à¸š TypeScript
- [ ] à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š type safety à¸à¹ˆà¸­à¸™ commit
description:
globs:
alwaysApply: false
---
